C51 COMPILER V9.03   OEM_FAN                                                               02/02/2015 14:30:22 PAGE 1   


C51 COMPILER V9.03, COMPILATION OF MODULE OEM_FAN
OBJECT MODULE PLACED IN Code\OEM\OEM_FAN.OBJ
COMPILER INVOKED BY: C:\Program Files\KeilC\C51\BIN\C51.exe Code\OEM\OEM_FAN.C LA WL(1) CD OT(9,SIZE) NOAREGS OR INCDIR(
                    -.\Code\CORE\INCLUDE\;.\Code\OEM\INCLUDE\;.\Code\CHIP\INCLUDE\;.\Code\API\INCLUDE\)

line level    source

   1          /*-----------------------------------------------------------------------------
   2           * TITLE: OEM_FAN.C
   3           *
   4           * Author : Dino
   5           *
   6           * Note : These functions are reference only.
   7           *        Please follow your project software specification to do some modification.
   8           *---------------------------------------------------------------------------*/
   9          
  10          #include <CORE_INCLUDE.H>
  11          #include <OEM_INCLUDE.H>
  12          
  13          //-----------------------------------------------------------------------------
  14          // Smart Fan control
  15          //-----------------------------------------------------------------------------
  16          //-----------------------------------------------------------------------------
  17          // Fan table 1   2009/08/18 Rev.01
  18          //-----------------------------------------------------------------------------
  19          const thermal code ThermalTalbe1[]=
  20          {
  21              {0, 42,     0,      0,      &Fan1On_Step1,  &Fan1Off_Step1, &Fan1RPM_Step1  },      // Level 0      
  22              {1, 50,     42,     26,     &Fan1On_Step2,  &Fan1Off_Step2, &Fan1RPM_Step2  },      // Level 1      
  23              {2, 55,     47,     30,     &Fan1On_Step3,  &Fan1Off_Step3, &Fan1RPM_Step3  },      // Level 2      
  24              {3, 65,     60,     32,     &Fan1On_Step4,  &Fan1Off_Step4, &Fan1RPM_Step4  },      // Level 3      
  25              {4, 75,     70,     35,     &Fan1On_Step5,  &Fan1Off_Step5, &Fan1RPM_Step5  },      // Level 4      
  26              {5, 85,     80,     38,     &Fan1On_Step6,  &Fan1Off_Step6, &Fan1RPM_Step6  },      // Level 5      
  27              {6,     127,        87,     41,     &Fan1On_Step7,  &Fan1Off_Step7, &Fan1RPM_Step7  },      // Level 6      
  28          };
  29          
  30          //-----------------------------------------------------------------------------
  31          // Fan table 2
  32          //-----------------------------------------------------------------------------
  33          const thermal code ThermalTalbe2[]=
  34          {
  35                  {0,     52,      0,     0,      &Fan2On_Step1,  &Fan2Off_Step1, &Fan2RPM_Step1  },      // Level 0      
  36                  {1,     60,     52,     21,     &Fan2On_Step2,  &Fan2Off_Step2, &Fan2RPM_Step2  },      // Level 1      
  37                  {2,     75,     67,     30,     &Fan2On_Step3,  &Fan2Off_Step3, &Fan2RPM_Step3  },      // Level 2      
  38                  {3,     127, 80,        38,     &Fan2On_Step4,  &Fan2Off_Step4, &Fan2RPM_Step4  },      // Level 3                      
  39          };
  40          
  41          //-----------------------------------------------------------------------------
  42          // The function of check fan rpm 1
  43          //----------------------------------------------------------------------------- 
  44          void CheckFanRPM1(void)
  45          {
  46   1              BYTE FanLevel_t = FanLevel;     
  47   1              BYTE Fan1RPM_t = Fan1RPM;
  48   1      
  49   1              if(Debugtemperature1==0x00)
  50   1              {
  51   2                      temperature1 = PECI_CPU_temp; //TCPU_temp  0x3B
  52   2              }
  53   1              else
  54   1              {
C51 COMPILER V9.03   OEM_FAN                                                               02/02/2015 14:30:22 PAGE 2   

  55   2                      temperature1 = Debugtemperature1;
  56   2              }
  57   1                      
  58   1              if(FanLevel_t <((sizeof(ThermalTalbe1)/sizeof(thermal))-1))
  59   1              {
  60   2                      if(temperature1> *ThermalTalbe1[FanLevel_t].FanOn)
  61   2                      {
  62   3                              FanLevel_t += 1;
  63   3                      }
  64   2              }
  65   1              
  66   1              if (FanLevel_t>0)
  67   1              {
  68   2                      if (temperature1< *ThermalTalbe1[FanLevel_t].FanOff)
  69   2                      {                       
  70   3                              FanLevel_t-=1;
  71   3                      }
  72   2              }
  73   1                      
  74   1              FanLevel = FanLevel_t;  
  75   1              Fan1RPM = *ThermalTalbe1[FanLevel_t].RPM;
  76   1      
  77   1      }
  78          
  79          //-----------------------------------------------------------------------------
  80          // The function of check fan rpm 2
  81          //-----------------------------------------------------------------------------
  82          void CheckFanRPM2(void)
  83          {
  84   1              BYTE FanLevel_t = FanLeve2;     
  85   1              BYTE Fan1RPM_t = Fan2RPM;
  86   1      
  87   1              if(Debugtemperature2==0x00)
  88   1              {
  89   2                      temperature2 = PECI_CPU_temp+5;  // TVGA_temp
  90   2              }
  91   1              else
  92   1              {
  93   2                      temperature2 = Debugtemperature2;
  94   2              }
  95   1                      
  96   1              if(FanLevel_t <((sizeof(ThermalTalbe2)/sizeof(thermal))-1))
  97   1              {
  98   2                      if(temperature2> *ThermalTalbe2[FanLevel_t].FanOn)
  99   2                      {
 100   3                              FanLevel_t += 1;
 101   3                      }
 102   2              }
 103   1              
 104   1              if (FanLevel_t>0)
 105   1              {
 106   2                      if (temperature2< *ThermalTalbe2[FanLevel_t].FanOff)
 107   2                      {                       
 108   3                              FanLevel_t-=1;
 109   3                      }
 110   2              }
 111   1                      
 112   1              FanLeve2 = FanLevel_t;  
 113   1              Fan2RPM = *ThermalTalbe2[FanLevel_t].RPM;
 114   1      }
 115          
 116          void Fan1MainControl(void)
C51 COMPILER V9.03   OEM_FAN                                                               02/02/2015 14:30:22 PAGE 3   

 117          {
 118   1                      if(((Fan1RPM*100)-RPMACC)>RPM1)
 119   1                      {
 120   2                              if(FanValue<MaxOutValue)
 121   2                                      FanValue++;
 122   2                      }
 123   1                      else if(((Fan1RPM*100)+RPMACC)<RPM1)
 124   1                      {
 125   2                              if(FanValue>0)
 126   2                                      FanValue--;
 127   2                      }
 128   1      
 129   1              if(DebugforceFan1RPM!=0) {
 130   2                      DCR0 = DebugforceFan1RPM;
 131   2              }
 132   1              else {
 133   2                      DCR0 = FanValue;
 134   2              }
 135   1      }
 136          
 137          void Fan2MainControl(void)
 138                  {
 139   1              if(((Fan2RPM*100)-RPMACC)>RPM2)
 140   1              {
 141   2                      if(FanValue2<MaxOutValue)
 142   2                              FanValue2++;    
 143   2              }
 144   1              else if(((Fan2RPM*100)+RPMACC)<RPM2)
 145   1              {
 146   2                      if(FanValue2>0)
 147   2                              FanValue2--;
 148   2              }               
 149   1      
 150   1              if(DebugforceFan2RPM!=0) {
 151   2                      DCR1 = DebugforceFan2RPM;
 152   2              }
 153   1              else {
 154   2                      DCR1 = FanValue2;
 155   2              }
 156   1      }
 157          
 158          
 159          //-----------------------------------------------------------------------------
 160          // The function of fan rpm control
 161          //-----------------------------------------------------------------------------
 162          void FanControl(void)
 163          {
 164   1      //      if(     RPM2==0x0000)
 165   1      //      {
 166   1      //              FanValue = FanInitValue;
 167   1      //      }
 168   1              
 169   1              Fan1MainControl();
 170   1              Fan2MainControl();
 171   1      
 172   1      //    if(Fan2RPM!=0x00)
 173   1      //    {
 174   1              
 175   1      //    }
 176   1      //    else
 177   1      //    {
 178   1      //        Fan2MainControl();
C51 COMPILER V9.03   OEM_FAN                                                               02/02/2015 14:30:22 PAGE 4   

 179   1      //    }
 180   1      }
 181          
 182          void FineTuneFan2PRM(void)
 183          {
 184   1              if (Fan2RPM != 0)
 185   1              {
 186   2                      if(((Fan2RPM*50)-RPMACC)>RPM2)
 187   2                      {
 188   3                              if(FanValue2 < MaxOutValue)
 189   3                              {
 190   4                                      FanValue2++;
 191   4                              }
 192   3                      }
 193   2                      else if(((Fan2RPM*50)+RPMACC)<RPM2)
 194   2                      {
 195   3                              if(FanValue2>0x00)
 196   3                              {
 197   4                                      FanValue2--;
 198   4                              }
 199   3                      }
 200   2              }
 201   1              else
 202   1              {
 203   2                      FanValue2 = 0;
 204   2      
 205   2              }
 206   1      }
 207          
 208          //-----------------------------------------------------------------------------
 209          // Init. thermal table 1
 210          //-----------------------------------------------------------------------------
 211          void InitThermalTable1(void)
 212          {
 213   1              BYTE index;
 214   1              index=0x00;
 215   1              while(index<(sizeof(ThermalTalbe1)/sizeof(thermal)))
 216   1              {
 217   2                      *ThermalTalbe1[index].FanOn=ThermalTalbe1[index].CFanOn;
 218   2                      *ThermalTalbe1[index].FanOff=ThermalTalbe1[index].CFanOff;
 219   2                      *ThermalTalbe1[index].RPM=ThermalTalbe1[index].CRPM;
 220   2                      index++;
 221   2              }
 222   1      }
 223          
 224          //-----------------------------------------------------------------------------
 225          // Init. thermal table 2
 226          //-----------------------------------------------------------------------------
 227          void InitThermalTable2(void)
 228          {
 229   1              BYTE index;
 230   1              index=0x00;
 231   1              while(index<(sizeof(ThermalTalbe2)/sizeof(thermal)))
 232   1              {
 233   2                      *ThermalTalbe2[index].FanOn=ThermalTalbe2[index].CFanOn;
 234   2                      *ThermalTalbe2[index].FanOff=ThermalTalbe2[index].CFanOff;
 235   2                      *ThermalTalbe2[index].RPM=ThermalTalbe2[index].CRPM;
 236   2                      index++;
 237   2              }
 238   1      }
 239          
 240          //-----------------------------------------------------------------------------
C51 COMPILER V9.03   OEM_FAN                                                               02/02/2015 14:30:22 PAGE 5   

 241          // Fan full off control
 242          //-----------------------------------------------------------------------------
 243          void FanFullOff(void)
 244          {
 245   1              FanValue = 0x00;
 246   1      }
 247          
 248          //-----------------------------------------------------------------------------
 249          // The function of get fan RPM
 250          //-----------------------------------------------------------------------------
 251          void GetRPM1(void)
 252          {
 253   1          BYTE tach_H;
 254   1          BYTE tach_L;
 255   1      
 256   1          tach_H = F1TMRR;
 257   1          tach_L = F1TLRR;
 258   1          if((tach_H!=0x00)||(tach_L!=0x00))
 259   1          {
 260   2                      if(((tach_H*256) + tach_L)<RPM1Max)
 261   2                      {
 262   3                              RPM1=(2875000/TACH1P/((tach_H*256) + tach_L));
 263   3                              //RPM1=(4312500/TACH1P/((tach_H*256) + tach_L));
 264   3                      }
 265   2              else
 266   2              {
 267   3                  RPM1=RPM1Max; 
 268   3              }
 269   2          }
 270   1          else
 271   1          {
 272   2              RPM1=0x0000;
 273   2              FanValue = FanInitValue;
 274   2          }
 275   1      }
 276          
 277          
 278          void GetRPM2(void)
 279          {
 280   1          BYTE tach_H;
 281   1          BYTE tach_L;
 282   1      
 283   1          tach_H = F2TMRR;
 284   1          tach_L = F2TLRR;
 285   1          if((tach_H!=0x00)||(tach_L!=0x00))
 286   1          {
 287   2                      if(((tach_H*256) + tach_L)<RPM2Max)
 288   2                      {
 289   3                      RPM2=(2875000/TACH2P/((tach_H*256) + tach_L));
 290   3                      //      RPM2=(4312500/TACH2P/((tach_H*256) + tach_L));
 291   3                      }
 292   2              else
 293   2              {
 294   3                  RPM2=RPM2Max; 
 295   3              }
 296   2          }
 297   1          else
 298   1          {
 299   2              RPM2=0x0000;
 300   2              FanValue2=FanInitValue;
 301   2          }
 302   1      }
C51 COMPILER V9.03   OEM_FAN                                                               02/02/2015 14:30:22 PAGE 6   

 303          
 304          
 305          //-----------------------------------------------------------------------------
 306          // The function of smart fan
 307          //-----------------------------------------------------------------------------
 308          void FanManager(void)
 309          {
 310   1              if(FanFullOnCont!=0x00)
 311   1              {
 312   2                      FanFullOnCont--;
 313   2              GetRPM1();
 314   2              GetRPM2();
 315   2                      return;
 316   2              }
 317   1      
 318   1              if(DebugFan1RPMT==0x00)                     // In normal control mode
 319   1              {
 320   2                      GetRPM1();
 321   2                      if((Fan2RPM!=0x00)) // ||(Fan2RPM!=0x00)
 322   2                      {
 323   3                              GetRPM2();
 324   3                              FineTuneFan2PRM();
 325   3                      }
 326   2                      else
 327   2                      {
 328   3                              if(FanValue != 0x00)
 329   3                              {
 330   4                                      RPM2=0x0000;
 331   4                                      FanFullOff();
 332   4                              }
 333   3                      }
 334   2                      FanControl();
 335   2              }
 336   1              else                                                                                    // In RPM debug mode
 337   1              {
 338   2                      GetRPM1();
 339   2                      if(     RPM1==0x0000)
 340   2                      {
 341   3                              FanValue = FanInitValue;
 342   3                      }
 343   2                      else
 344   2                      {
 345   3                              if(((DebugFan1RPMT*100)-RPMACC)>RPM1)
 346   3                              {
 347   4                                      if(FanValue<MaxOutValue)
 348   4                                      FanValue++;     
 349   4                              }
 350   3                              else if(((DebugFan1RPMT*100)+RPMACC)<RPM1)
 351   3                              {
 352   4                                      if(FanValue>0x00)
 353   4                                      FanValue--;     
 354   4                              }
 355   3                      }
 356   2              }
 357   1      }
 358          
 359          //-----------------------------------------------------------------------------
 360          // Function Name : ReadCPUTemp
 361          //-----------------------------------------------------------------------------
 362          void ReadCPUTemp(void) 
 363          {
 364   1          if(SystemIsS0)
C51 COMPILER V9.03   OEM_FAN                                                               02/02/2015 14:30:22 PAGE 7   

 365   1          {
 366   2              // Use PECI interface to read cpu temperature
 367   2              #ifdef PECI_Support
 368   2                  #if ReadCPUTemperature
 369   2                  if(CPUTjmax==0x00)         // Need to read CPU Tjmax
 370   2                  {
 371   3                      PECI_ReadCPUTJMAX();
 372   3                  }
 373   2                  else
 374   2                  {
 375   3                      PECI_ReadCPUTemp();     // Use PECI interface to read cpu temperature
 376   3                  }
 377   2                  #endif
 378   2              #endif 
 379   2              
 380   2              // Use thermal sensor to read cpu temperature
 381   2              //SET_MASK(SMBus2Flag1, PollRemote);
 382   2          }
 383   1      }
 384          
 385          
 386          //-----------------------------------------------------------------------------
 387          // Function Name : ReadDGPUTemp
 388          //-----------------------------------------------------------------------------
 389          void ReadDgpuTemp(void) 
 390          {
 391   1          if(SystemIsS0)
 392   1          {
 393   2              PORT_BYTE_PNTR byte_register_pntr;
 394   2              LWORD LWORDTemp;    
 395   2              XBYTE Status;
 396   2              
 397   2              //if ( IS_MASK_CLEAR(TESTMODE,b3D_GB_det) ) return;
 398   2      
 399   2              //SMB_CHANEL = 0x03;
 400   2              //SMB_ADDR = 0x82;
 401   2              //SMB_CMD = 0x01;
 402   2              //SMB_BCNT = 0x04;
 403   2              Status = FALSE;
 404   2        
 405   2              if(SmBusI2CAddress==0x00) {
 406   3                  byte_register_pntr = &ATIDGPUTemp;
 407   3      //            *(byte_register_pntr + 0) = 0x0F;
 408   3      //           *(byte_register_pntr + 1) = 0x00;
 409   3      //            *(byte_register_pntr + 2) = 0x01;
 410   3      //            *(byte_register_pntr + 3) = 0xC5; 
 411   3      
 412   3      //            if (bWSMBusBlock(DefAtiVgaSMBusCH, SMbusWBK, DefAtiVgaSMBusAddr, 0x01, &ATIDGPUTemp, 0x04,SM
             -Bus_NoPEC))
 413   3      //            {
 414   3                      //SMB_CHANEL = 0x03;
 415   3                      //SMB_ADDR = 0x82;
 416   3                      //SMB_CMD = 0x03;
 417   3                      //20130923      if (bRSMBusBlock(DefAtiVgaSMBusCH, SMbusRBK, DefAtiVgaSMBusAddr, 0x03, &ATIDGPUTe
             -mp))
 418   3                      if (bRWSMBus(DefAtiVgaSMBusCH, SMbusRB, DefAtiVgaSMBusAddr, 0x00, &ATIDGPUTemp, SMBus_NoPE
             -C))
 419   3                      {
 420   4      //                    LWORDTemp = ATIDGPUTemp;
 421   4      //                    LWORDTemp = LWORDTemp >> 9;
 422   4      //                    TVGA_temp = (BYTE)LWORDTemp;
 423   4                          Status = TRUE;
C51 COMPILER V9.03   OEM_FAN                                                               02/02/2015 14:30:22 PAGE 8   

 424   4                      }   
 425   3      //            }
 426   3              } else {
 427   3      //          if (bWSMBusBlock(DefAtiVgaSMBusCH, SMbusWBK, SmBusI2CAddress, 0x01, &ATIDGPUTemp, 0x04, SMBus_NoPEC
             -))
 428   3      //          {
 429   3                      //SMB_CHANEL = 0x03;
 430   3                      //SMB_ADDR = 0x82;
 431   3                      //SMB_CMD = 0x03;
 432   3                      //20130923              if (bRSMBusBlock(DefAtiVgaSMBusCH, SMbusRBK, DefAtiVgaSMBusAddr, 0x03, &ATIDGPUTemp))
 433   3                      if(GPU_Therm_Method==0x01) {
 434   4                              if (bRSMBusBlockLS(DefAtiVgaSMBusCH, SMbusRBK, SmBusI2CAddress, NowScanCmd, &ATIDGPUTemp,0x04))
 435   4                              {
 436   5                                      LWORDTemp = ATIDGPUTemp;
 437   5                                      LWORDTemp = LWORDTemp >> 9;
 438   5                                      TVGA_temp = (BYTE)LWORDTemp;
 439   5                                      Status = TRUE;
 440   5                              }
 441   4      //          }
 442   4                      }
 443   3      
 444   3                      if(GPU_Therm_Method==0x02) {
 445   4                              if (bRSMBusBlockLS(DefAtiVgaSMBusCH, SMbusRW, SmBusI2CAddress, NowScanCmd, &ATIDGPUTemp,0x02))
 446   4                              {
 447   5                                      LWORDTemp = ATIDGPUTemp;
 448   5                                      LWORDTemp = LWORDTemp >> 9;
 449   5                                      TVGA_temp = (BYTE)LWORDTemp;
 450   5                                      Status = TRUE;
 451   5                              }
 452   4                      }
 453   3      
 454   3              if(GPU_Therm_Method==0x03) {
 455   4                      if (bSMBusReceiveByte(DefAtiVgaSMBusCH, SmBusI2CAddress, &ATIDGPUTemp))
 456   4                      {
 457   5                              LWORDTemp = ATIDGPUTemp;
 458   5                              LWORDTemp = LWORDTemp >> 9;
 459   5                              TVGA_temp = (BYTE)LWORDTemp;
 460   5                              Status = TRUE;
 461   5                      }
 462   4              }
 463   3              
 464   3              if(GPU_Therm_Method==0x04) {            
 465   4                      bSMBusSendByte(DefAtiVgaSMBusCH, DefAtiVgaSMBusAddr, 0x00); 
 466   4                      if (bRSMBusBlockLS(DefAtiVgaSMBusCH, SMbusRBK, SmBusI2CAddress, 0x00, &ATIDGPUTemp, 1))
 467   4                      {
 468   5                              LWORDTemp = ATIDGPUTemp;
 469   5                              LWORDTemp = LWORDTemp >> 9;
 470   5                              TVGA_temp = (BYTE)LWORDTemp;
 471   5                              Status = TRUE;
 472   5                      }
 473   4              }
 474   3      
 475   3              if(GPU_Therm_Method==0x05) {            
 476   4                      bWSMBusBlock(DefAtiVgaSMBusCH, SMbusWBK, SmBusI2CAddress, 0x00, 0x00, 0x01,SMBus_NoPEC);
 477   4                      if (bRSMBusBlockLS(DefAtiVgaSMBusCH, SMbusRBK, SmBusI2CAddress, 0x00, &ATIDGPUTemp, 1))
 478   4                      {
 479   5                              LWORDTemp = ATIDGPUTemp;
 480   5                              LWORDTemp = LWORDTemp >> 9;
 481   5                              TVGA_temp = (BYTE)LWORDTemp;
 482   5                              Status = TRUE;
 483   5                      }
 484   4              }
C51 COMPILER V9.03   OEM_FAN                                                               02/02/2015 14:30:22 PAGE 9   

 485   3      
 486   3      
 487   3                      
 488   3              }
 489   2      
 490   2              if (Status)
 491   2              {
 492   3                  Cark_Test01 = 0;
 493   3                  //CLEAR_MASK(DeviceFailFlag1, bATIGPUSMBusFail);      
 494   3              }
 495   2              else
 496   2              {
 497   3                  //SET_MASK(DeviceFailFlag1, bATIGPUSMBusFail);
 498   3                  Cark_Test01++;
 499   3              }
 500   2          }
 501   1      }
 502             
C51 COMPILER V9.03   OEM_FAN                                                               02/02/2015 14:30:22 PAGE 10  

ASSEMBLY LISTING OF GENERATED OBJECT CODE


             ; FUNCTION Com0062 (BEGIN)
0000         L?0099:
0000         L?0100:
0000 900000      E     MOV     DPTR,#ATIDGPUTemp
0003 E0                MOVX    A,@DPTR
0004 FF                MOV     R7,A
0005 E4                CLR     A
0006 FC                MOV     R4,A
0007 FD                MOV     R5,A
0008 FE                MOV     R6,A
0009 900000      R     MOV     DPTR,#LWORDTemp
000C 120000      E     LCALL   ?C?LSTXDATA
000F 900000      R     MOV     DPTR,#LWORDTemp
0012 120000      E     LCALL   ?C?LLDXDATA
0015 7809              MOV     R0,#09H
0017 120000      E     LCALL   ?C?ULSHR
001A 900000      R     MOV     DPTR,#LWORDTemp
001D 120000      E     LCALL   ?C?LSTXDATA
0020 900000      R     MOV     DPTR,#LWORDTemp
0023 020000      E     LJMP    ?C?LLDXDATA
0026         L?0101:
0026 EF                MOV     A,R7
0027 75F00A            MOV     B,#0AH
002A A4                MUL     AB
002B 2400        R     ADD     A,#LOW ThermalTalbe1+04H
002D F582              MOV     DPL,A
002F E4                CLR     A
0030 3400        R     ADDC    A,#HIGH ThermalTalbe1+04H
0032         L?0102:
0032 F583              MOV     DPH,A
0034 E4                CLR     A
0035 93                MOVC    A,@A+DPTR
0036 FC                MOV     R4,A
0037 7401              MOV     A,#01H
0039 93                MOVC    A,@A+DPTR
003A F582              MOV     DPL,A
003C 8C83              MOV     DPH,R4
003E 22                RET     
003F         L?0103:
003F 900000      E     MOV     DPTR,#SmBusI2CAddress
0042 E0                MOVX    A,@DPTR
0043 FB                MOV     R3,A
0044 900000      E     MOV     DPTR,#NowScanCmd
0047 E0                MOVX    A,@DPTR
0048 900000      E     MOV     DPTR,#?_bRSMBusBlockLS?BYTE+03H
004B F0                MOVX    @DPTR,A
004C         L?0104:
004C A3                INC     DPTR
004D         L?0105:
004D 7E00        E     MOV     R6,#HIGH ATIDGPUTemp
004F         L?0106:
004F 7400        E     MOV     A,#HIGH ATIDGPUTemp
0051 F0                MOVX    @DPTR,A
0052 A3                INC     DPTR
0053 7400        E     MOV     A,#LOW ATIDGPUTemp
0055 F0                MOVX    @DPTR,A
0056 22                RET     
0057         L?0107:
0057 E0                MOVX    A,@DPTR
C51 COMPILER V9.03   OEM_FAN                                                               02/02/2015 14:30:22 PAGE 11  

0058 900000      E     MOV     DPTR,#RPM1+01H
005B         L?0108:
005B 75F064            MOV     B,#064H
005E A4                MUL     AB
005F 249C              ADD     A,#09CH
0061 FF                MOV     R7,A
0062 E5F0              MOV     A,B
0064 34FF              ADDC    A,#0FFH
0066 FE                MOV     R6,A
0067 C3                CLR     C
0068 E0                MOVX    A,@DPTR
0069 9F                SUBB    A,R7
006A 22                RET     
006B         L?0109:
006B 900000      E     MOV     DPTR,#Fan2RPM
006E E0                MOVX    A,@DPTR
006F 900000      E     MOV     DPTR,#RPM2+01H
0072         L?0110:
0072 A4                MUL     AB
0073 2464              ADD     A,#064H
0075 FF                MOV     R7,A
0076 E4                CLR     A
0077 35F0              ADDC    A,B
0079 FE                MOV     R6,A
007A D3                SETB    C
007B E0                MOVX    A,@DPTR
007C 9F                SUBB    A,R7
007D 22                RET     
007E         L?0111:
007E         L?0112:
007E F583              MOV     DPH,A
0080 E4                CLR     A
0081 93                MOVC    A,@A+DPTR
0082 FE                MOV     R6,A
0083 7401              MOV     A,#01H
0085 93                MOVC    A,@A+DPTR
0086 F582              MOV     DPL,A
0088 8E83              MOV     DPH,R6
008A E0                MOVX    A,@DPTR
008B 22                RET     
008C         L?0113:
008C         L?0114:
008C F583              MOV     DPH,A
008E E4                CLR     A
008F 93                MOVC    A,@A+DPTR
0090 FE                MOV     R6,A
0091 EF                MOV     A,R7
0092 75F00A            MOV     B,#0AH
0095 A4                MUL     AB
0096 22                RET     
0097         L?0115:
0097 CF                XCH     A,R7
0098 ED                MOV     A,R5
0099 CF                XCH     A,R7
009A ED                MOV     A,R5
009B FE                MOV     R6,A
009C CD                XCH     A,R5
009D EC                MOV     A,R4
009E CD                XCH     A,R5
009F 7C00              MOV     R4,#00H
00A1 E4                CLR     A
00A2 2D                ADD     A,R5
C51 COMPILER V9.03   OEM_FAN                                                               02/02/2015 14:30:22 PAGE 12  

00A3 FF                MOV     R7,A
00A4 EC                MOV     A,R4
00A5 3E                ADDC    A,R6
00A6 CB                XCH     A,R3
00A7 EF                MOV     A,R7
00A8 CB                XCH     A,R3
00A9 FA                MOV     R2,A
00AA E4                CLR     A
00AB F9                MOV     R1,A
00AC F8                MOV     R0,A
00AD 7F78              MOV     R7,#078H
00AF 7EDE              MOV     R6,#0DEH
00B1 7D2B              MOV     R5,#02BH
00B3 020000      E     LJMP    ?C?SLDIV
00B6         L?0116:
00B6         L?0117:
00B6 900000      E     MOV     DPTR,#TVGA_temp
00B9 EF                MOV     A,R7
00BA F0                MOVX    @DPTR,A
00BB         L?0118:
00BB 900000      R     MOV     DPTR,#Status
00BE 7401              MOV     A,#01H
00C0 F0                MOVX    @DPTR,A
00C1 22                RET     
00C2         L?0119:
00C2 ED                MOV     A,R5
00C3 FE                MOV     R6,A
00C4 EC                MOV     A,R4
00C5 7A00              MOV     R2,#00H
00C7 2400              ADD     A,#00H
00C9 FF                MOV     R7,A
00CA EA                MOV     A,R2
00CB 3E                ADDC    A,R6
00CC FE                MOV     R6,A
00CD C3                CLR     C
00CE EF                MOV     A,R7
00CF 9458              SUBB    A,#058H
00D1 EE                MOV     A,R6
00D2 941B              SUBB    A,#01BH
00D4 22                RET     
00D5         L?0120:
00D5         L?0121:
00D5 EE                MOV     A,R6
00D6 F0                MOVX    @DPTR,A
00D7 EF                MOV     A,R7
00D8 75F00A            MOV     B,#0AH
00DB A4                MUL     AB
00DC 22                RET     
00DD         L?0122:
00DD 7401              MOV     A,#01H
00DF         L?0123:
00DF A3                INC     DPTR
00E0 F0                MOVX    @DPTR,A
00E1 7D14              MOV     R5,#014H
00E3 E4                CLR     A
00E4 FF                MOV     R7,A
00E5 22                RET     
00E6         L?0124:
00E6 900000      E     MOV     DPTR,#SmBusI2CAddress
00E9 E0                MOVX    A,@DPTR
00EA FB                MOV     R3,A
00EB E4                CLR     A
C51 COMPILER V9.03   OEM_FAN                                                               02/02/2015 14:30:22 PAGE 13  

00EC 900000      E     MOV     DPTR,#?_bRSMBusBlockLS?BYTE+03H
00EF F0                MOVX    @DPTR,A
00F0 22                RET     
             ; FUNCTION Com0062 (END)

             ; FUNCTION CheckFanRPM1 (BEGIN)
                                           ; SOURCE LINE # 44
                                           ; SOURCE LINE # 45
                                           ; SOURCE LINE # 46
0000 900000      E     MOV     DPTR,#FanLevel
0003 E0                MOVX    A,@DPTR
0004 FF                MOV     R7,A
;---- Variable 'FanLevel_t' assigned to Register 'R7' ----
                                           ; SOURCE LINE # 47
0005 900000      E     MOV     DPTR,#Fan1RPM
0008 E0                MOVX    A,@DPTR
0009 900000      R     MOV     DPTR,#Fan1RPM_t
000C F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 49
000D 900000      E     MOV     DPTR,#Debugtemperature1
0010 E0                MOVX    A,@DPTR
0011 7005              JNZ     ?C0001
                                           ; SOURCE LINE # 50
                                           ; SOURCE LINE # 51
0013 900000      E     MOV     DPTR,#PECI_CPU_temp
                                           ; SOURCE LINE # 52
0016 8003              SJMP    ?C0095
0018         ?C0001:
                                           ; SOURCE LINE # 54
                                           ; SOURCE LINE # 55
0018 900000      E     MOV     DPTR,#Debugtemperature1
001B         ?C0095:
001B E0                MOVX    A,@DPTR
001C 900000      E     MOV     DPTR,#temperature1
001F F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 56
0020         ?C0002:
                                           ; SOURCE LINE # 58
0020 EF                MOV     A,R7
0021 C3                CLR     C
0022 9406              SUBB    A,#06H
0024 500E              JNC     ?C0003
                                           ; SOURCE LINE # 59
                                           ; SOURCE LINE # 60
0026 120000      R     LCALL   L?0101
0029 E0                MOVX    A,@DPTR
002A FE                MOV     R6,A
002B 900000      E     MOV     DPTR,#temperature1
002E E0                MOVX    A,@DPTR
002F D3                SETB    C
0030 9E                SUBB    A,R6
0031 4001              JC      ?C0003
                                           ; SOURCE LINE # 61
                                           ; SOURCE LINE # 62
0033 0F                INC     R7
                                           ; SOURCE LINE # 63
                                           ; SOURCE LINE # 64
0034         ?C0003:
                                           ; SOURCE LINE # 66
0034 EF                MOV     A,R7
0035 D3                SETB    C
0036 9400              SUBB    A,#00H
C51 COMPILER V9.03   OEM_FAN                                                               02/02/2015 14:30:22 PAGE 14  

0038 401A              JC      ?C0005
                                           ; SOURCE LINE # 67
                                           ; SOURCE LINE # 68
003A EF                MOV     A,R7
003B 75F00A            MOV     B,#0AH
003E A4                MUL     AB
003F 2400        R     ADD     A,#LOW ThermalTalbe1+06H
0041 F582              MOV     DPL,A
0043 E4                CLR     A
0044 3400        R     ADDC    A,#HIGH ThermalTalbe1+06H
0046 120000      R     LCALL   L?0102
0049 E0                MOVX    A,@DPTR
004A FE                MOV     R6,A
004B 900000      E     MOV     DPTR,#temperature1
004E E0                MOVX    A,@DPTR
004F C3                CLR     C
0050 9E                SUBB    A,R6
0051 5001              JNC     ?C0005
                                           ; SOURCE LINE # 69
                                           ; SOURCE LINE # 70
0053 1F                DEC     R7
                                           ; SOURCE LINE # 71
                                           ; SOURCE LINE # 72
0054         ?C0005:
                                           ; SOURCE LINE # 74
0054 900000      E     MOV     DPTR,#FanLevel
0057 EF                MOV     A,R7
0058 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 75
0059 75F00A            MOV     B,#0AH
005C A4                MUL     AB
005D 2400        R     ADD     A,#LOW ThermalTalbe1+08H
005F F582              MOV     DPL,A
0061 E4                CLR     A
0062 3400        R     ADDC    A,#HIGH ThermalTalbe1+08H
0064 120000      R     LCALL   L?0111
0067 900000      E     MOV     DPTR,#Fan1RPM
006A F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 77
006B 22                RET     
             ; FUNCTION CheckFanRPM1 (END)

             ; FUNCTION CheckFanRPM2 (BEGIN)
                                           ; SOURCE LINE # 82
                                           ; SOURCE LINE # 83
                                           ; SOURCE LINE # 84
0000 900000      E     MOV     DPTR,#FanLeve2
0003 E0                MOVX    A,@DPTR
;---- Variable 'FanLevel_t' assigned to Register 'R5' ----
0004 FD                MOV     R5,A
                                           ; SOURCE LINE # 85
0005 900000      E     MOV     DPTR,#Fan2RPM
0008 E0                MOVX    A,@DPTR
0009 900000      R     MOV     DPTR,#Fan1RPM_t
000C F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 87
000D 900000      E     MOV     DPTR,#Debugtemperature2
0010 E0                MOVX    A,@DPTR
0011 7008              JNZ     ?C0008
                                           ; SOURCE LINE # 88
                                           ; SOURCE LINE # 89
0013 900000      E     MOV     DPTR,#PECI_CPU_temp
C51 COMPILER V9.03   OEM_FAN                                                               02/02/2015 14:30:22 PAGE 15  

0016 E0                MOVX    A,@DPTR
0017 2405              ADD     A,#05H
                                           ; SOURCE LINE # 90
0019 8004              SJMP    ?C0096
001B         ?C0008:
                                           ; SOURCE LINE # 92
                                           ; SOURCE LINE # 93
001B 900000      E     MOV     DPTR,#Debugtemperature2
001E E0                MOVX    A,@DPTR
001F         ?C0096:
001F 900000      E     MOV     DPTR,#temperature2
0022 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 94
0023         ?C0009:
                                           ; SOURCE LINE # 96
0023 ED                MOV     A,R5
0024 C3                CLR     C
0025 9403              SUBB    A,#03H
0027 5019              JNC     ?C0010
                                           ; SOURCE LINE # 97
                                           ; SOURCE LINE # 98
0029 ED                MOV     A,R5
002A 75F00A            MOV     B,#0AH
002D A4                MUL     AB
002E 2400        R     ADD     A,#LOW ThermalTalbe2+04H
0030 F582              MOV     DPL,A
0032 E4                CLR     A
0033 3400        R     ADDC    A,#HIGH ThermalTalbe2+04H
0035 120000      R     LCALL   L?0111
0038 FF                MOV     R7,A
0039 900000      E     MOV     DPTR,#temperature2
003C E0                MOVX    A,@DPTR
003D D3                SETB    C
003E 9F                SUBB    A,R7
003F 4001              JC      ?C0010
                                           ; SOURCE LINE # 99
                                           ; SOURCE LINE # 100
0041 0D                INC     R5
                                           ; SOURCE LINE # 101
                                           ; SOURCE LINE # 102
0042         ?C0010:
                                           ; SOURCE LINE # 104
0042 ED                MOV     A,R5
0043 D3                SETB    C
0044 9400              SUBB    A,#00H
0046 4019              JC      ?C0012
                                           ; SOURCE LINE # 105
                                           ; SOURCE LINE # 106
0048 ED                MOV     A,R5
0049 75F00A            MOV     B,#0AH
004C A4                MUL     AB
004D 2400        R     ADD     A,#LOW ThermalTalbe2+06H
004F F582              MOV     DPL,A
0051 E4                CLR     A
0052 3400        R     ADDC    A,#HIGH ThermalTalbe2+06H
0054 120000      R     LCALL   L?0112
0057 FF                MOV     R7,A
0058 900000      E     MOV     DPTR,#temperature2
005B E0                MOVX    A,@DPTR
005C C3                CLR     C
005D 9F                SUBB    A,R7
005E 5001              JNC     ?C0012
C51 COMPILER V9.03   OEM_FAN                                                               02/02/2015 14:30:22 PAGE 16  

                                           ; SOURCE LINE # 107
                                           ; SOURCE LINE # 108
0060 1D                DEC     R5
                                           ; SOURCE LINE # 109
                                           ; SOURCE LINE # 110
0061         ?C0012:
                                           ; SOURCE LINE # 112
0061 900000      E     MOV     DPTR,#FanLeve2
0064 ED                MOV     A,R5
0065 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 113
0066 75F00A            MOV     B,#0AH
0069 A4                MUL     AB
006A 2400        R     ADD     A,#LOW ThermalTalbe2+08H
006C F582              MOV     DPL,A
006E E4                CLR     A
006F 3400        R     ADDC    A,#HIGH ThermalTalbe2+08H
0071 120000      R     LCALL   L?0112
0074 900000      E     MOV     DPTR,#Fan2RPM
0077 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 114
0078 22                RET     
             ; FUNCTION CheckFanRPM2 (END)

             ; FUNCTION Fan1MainControl (BEGIN)
                                           ; SOURCE LINE # 116
                                           ; SOURCE LINE # 117
                                           ; SOURCE LINE # 118
0000 900000      E     MOV     DPTR,#Fan1RPM
0003 120000      R     LCALL   L?0107
0006 900000      E     MOV     DPTR,#RPM1
0009 E0                MOVX    A,@DPTR
000A 9E                SUBB    A,R6
000B 500E              JNC     ?C0015
                                           ; SOURCE LINE # 119
                                           ; SOURCE LINE # 120
000D 900000      E     MOV     DPTR,#DCR0
0010 E0                MOVX    A,@DPTR
0011 C3                CLR     C
0012 94F0              SUBB    A,#0F0H
0014 5025              JNC     ?C0017
                                           ; SOURCE LINE # 121
0016 E0                MOVX    A,@DPTR
0017 04                INC     A
0018 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 122
0019 8020              SJMP    ?C0017
001B         ?C0015:
                                           ; SOURCE LINE # 123
001B 900000      E     MOV     DPTR,#Fan1RPM
001E E0                MOVX    A,@DPTR
001F 75F064            MOV     B,#064H
0022 900000      E     MOV     DPTR,#RPM1+01H
0025 120000      R     LCALL   L?0110
0028 900000      E     MOV     DPTR,#RPM1
002B E0                MOVX    A,@DPTR
002C 9E                SUBB    A,R6
002D 400C              JC      ?C0017
                                           ; SOURCE LINE # 124
                                           ; SOURCE LINE # 125
002F 900000      E     MOV     DPTR,#DCR0
0032 E0                MOVX    A,@DPTR
C51 COMPILER V9.03   OEM_FAN                                                               02/02/2015 14:30:22 PAGE 17  

0033 D3                SETB    C
0034 9400              SUBB    A,#00H
0036 4003              JC      ?C0017
                                           ; SOURCE LINE # 126
0038 E0                MOVX    A,@DPTR
0039 14                DEC     A
003A F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 127
003B         ?C0017:
                                           ; SOURCE LINE # 129
003B 900000      E     MOV     DPTR,#DebugforceFan1RPM
003E E0                MOVX    A,@DPTR
003F 6006              JZ      ?C0020
                                           ; SOURCE LINE # 130
0041 E0                MOVX    A,@DPTR
0042 900000      E     MOV     DPTR,#DCR0
0045 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 131
0046 22                RET     
0047         ?C0020:
                                           ; SOURCE LINE # 132
                                           ; SOURCE LINE # 133
0047 900000      E     MOV     DPTR,#DCR0
004A E0                MOVX    A,@DPTR
004B F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 134
                                           ; SOURCE LINE # 135
004C         ?C0022:
004C 22                RET     
             ; FUNCTION Fan1MainControl (END)

             ; FUNCTION Fan2MainControl (BEGIN)
                                           ; SOURCE LINE # 137
                                           ; SOURCE LINE # 138
                                           ; SOURCE LINE # 139
0000 900000      E     MOV     DPTR,#Fan2RPM
0003 E0                MOVX    A,@DPTR
0004 900000      E     MOV     DPTR,#RPM2+01H
0007 120000      R     LCALL   L?0108
000A 900000      E     MOV     DPTR,#RPM2
000D E0                MOVX    A,@DPTR
000E 9E                SUBB    A,R6
000F 500E              JNC     ?C0023
                                           ; SOURCE LINE # 140
                                           ; SOURCE LINE # 141
0011 900000      E     MOV     DPTR,#DCR1
0014 E0                MOVX    A,@DPTR
0015 C3                CLR     C
0016 94F0              SUBB    A,#0F0H
0018 501E              JNC     ?C0025
                                           ; SOURCE LINE # 142
001A E0                MOVX    A,@DPTR
001B 04                INC     A
001C F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 143
001D 8019              SJMP    ?C0025
001F         ?C0023:
                                           ; SOURCE LINE # 144
001F 75F064            MOV     B,#064H
0022 120000      R     LCALL   L?0109
0025 900000      E     MOV     DPTR,#RPM2
0028 E0                MOVX    A,@DPTR
C51 COMPILER V9.03   OEM_FAN                                                               02/02/2015 14:30:22 PAGE 18  

0029 9E                SUBB    A,R6
002A 400C              JC      ?C0025
                                           ; SOURCE LINE # 145
                                           ; SOURCE LINE # 146
002C 900000      E     MOV     DPTR,#DCR1
002F E0                MOVX    A,@DPTR
0030 D3                SETB    C
0031 9400              SUBB    A,#00H
0033 4003              JC      ?C0025
                                           ; SOURCE LINE # 147
0035 E0                MOVX    A,@DPTR
0036 14                DEC     A
0037 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 148
0038         ?C0025:
                                           ; SOURCE LINE # 150
0038 900000      E     MOV     DPTR,#DebugforceFan2RPM
003B E0                MOVX    A,@DPTR
003C 6006              JZ      ?C0028
                                           ; SOURCE LINE # 151
003E E0                MOVX    A,@DPTR
003F 900000      E     MOV     DPTR,#DCR1
0042 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 152
0043 22                RET     
0044         ?C0028:
                                           ; SOURCE LINE # 153
                                           ; SOURCE LINE # 154
0044 900000      E     MOV     DPTR,#DCR1
0047 E0                MOVX    A,@DPTR
0048 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 155
                                           ; SOURCE LINE # 156
0049         ?C0030:
0049 22                RET     
             ; FUNCTION Fan2MainControl (END)

             ; FUNCTION FanControl (BEGIN)
                                           ; SOURCE LINE # 162
                                           ; SOURCE LINE # 163
                                           ; SOURCE LINE # 169
0000 120000      R     LCALL   Fan1MainControl
                                           ; SOURCE LINE # 170
0003 020000      R     LJMP    Fan2MainControl
             ; FUNCTION FanControl (END)

             ; FUNCTION FineTuneFan2PRM (BEGIN)
                                           ; SOURCE LINE # 182
                                           ; SOURCE LINE # 183
                                           ; SOURCE LINE # 184
0000 900000      E     MOV     DPTR,#Fan2RPM
0003 E0                MOVX    A,@DPTR
0004 6041              JZ      ?C0032
                                           ; SOURCE LINE # 185
                                           ; SOURCE LINE # 186
0006 E0                MOVX    A,@DPTR
0007 75F032            MOV     B,#032H
000A A4                MUL     AB
000B 249C              ADD     A,#09CH
000D FF                MOV     R7,A
000E E5F0              MOV     A,B
0010 34FF              ADDC    A,#0FFH
C51 COMPILER V9.03   OEM_FAN                                                               02/02/2015 14:30:22 PAGE 19  

0012 FE                MOV     R6,A
0013 C3                CLR     C
0014 900000      E     MOV     DPTR,#RPM2+01H
0017 E0                MOVX    A,@DPTR
0018 9F                SUBB    A,R7
0019 900000      E     MOV     DPTR,#RPM2
001C E0                MOVX    A,@DPTR
001D 9E                SUBB    A,R6
001E 500D              JNC     ?C0033
                                           ; SOURCE LINE # 187
                                           ; SOURCE LINE # 188
0020 900000      E     MOV     DPTR,#DCR1
0023 E0                MOVX    A,@DPTR
0024 C3                CLR     C
0025 94F0              SUBB    A,#0F0H
0027 5023              JNC     ?C0039
                                           ; SOURCE LINE # 189
                                           ; SOURCE LINE # 190
0029 E0                MOVX    A,@DPTR
002A 04                INC     A
002B F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 191
                                           ; SOURCE LINE # 192
002C 22                RET     
002D         ?C0033:
                                           ; SOURCE LINE # 193
002D 75F032            MOV     B,#032H
0030 120000      R     LCALL   L?0109
0033 900000      E     MOV     DPTR,#RPM2
0036 E0                MOVX    A,@DPTR
0037 9E                SUBB    A,R6
0038 4012              JC      ?C0039
                                           ; SOURCE LINE # 194
                                           ; SOURCE LINE # 195
003A 900000      E     MOV     DPTR,#DCR1
003D E0                MOVX    A,@DPTR
003E D3                SETB    C
003F 9400              SUBB    A,#00H
0041 4009              JC      ?C0039
                                           ; SOURCE LINE # 196
                                           ; SOURCE LINE # 197
0043 E0                MOVX    A,@DPTR
0044 14                DEC     A
0045 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 198
                                           ; SOURCE LINE # 199
                                           ; SOURCE LINE # 200
0046 22                RET     
0047         ?C0032:
                                           ; SOURCE LINE # 202
                                           ; SOURCE LINE # 203
0047 E4                CLR     A
0048 900000      E     MOV     DPTR,#DCR1
004B F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 205
                                           ; SOURCE LINE # 206
004C         ?C0039:
004C 22                RET     
             ; FUNCTION FineTuneFan2PRM (END)

             ; FUNCTION InitThermalTable1 (BEGIN)
                                           ; SOURCE LINE # 211
C51 COMPILER V9.03   OEM_FAN                                                               02/02/2015 14:30:22 PAGE 20  

                                           ; SOURCE LINE # 212
                                           ; SOURCE LINE # 214
;---- Variable 'index' assigned to Register 'R7' ----
0000 E4                CLR     A
0001 FF                MOV     R7,A
0002         ?C0040:
                                           ; SOURCE LINE # 215
                                           ; SOURCE LINE # 216
                                           ; SOURCE LINE # 217
0002 EF                MOV     A,R7
0003 75F00A            MOV     B,#0AH
0006 A4                MUL     AB
0007 2400        R     ADD     A,#LOW ThermalTalbe1+01H
0009 F582              MOV     DPL,A
000B E4                CLR     A
000C 3400        R     ADDC    A,#HIGH ThermalTalbe1+01H
000E F583              MOV     DPH,A
0010 E4                CLR     A
0011 93                MOVC    A,@A+DPTR
0012 FE                MOV     R6,A
0013 120000      R     LCALL   L?0101
                                           ; SOURCE LINE # 218
0016 120000      R     LCALL   L?0120
0019 2400        R     ADD     A,#LOW ThermalTalbe1+02H
001B F582              MOV     DPL,A
001D E4                CLR     A
001E 3400        R     ADDC    A,#HIGH ThermalTalbe1+02H
0020 120000      R     LCALL   L?0113
0023 2400        R     ADD     A,#LOW ThermalTalbe1+06H
0025 F582              MOV     DPL,A
0027 E4                CLR     A
0028 3400        R     ADDC    A,#HIGH ThermalTalbe1+06H
002A 120000      R     LCALL   L?0102
                                           ; SOURCE LINE # 219
002D 120000      R     LCALL   L?0120
0030 2400        R     ADD     A,#LOW ThermalTalbe1+03H
0032 F582              MOV     DPL,A
0034 E4                CLR     A
0035 3400        R     ADDC    A,#HIGH ThermalTalbe1+03H
0037 120000      R     LCALL   L?0113
003A 2400        R     ADD     A,#LOW ThermalTalbe1+08H
003C F582              MOV     DPL,A
003E E4                CLR     A
003F 3400        R     ADDC    A,#HIGH ThermalTalbe1+08H
0041 120000      R     LCALL   L?0102
0044 EE                MOV     A,R6
0045 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 220
0046 0F                INC     R7
                                           ; SOURCE LINE # 221
0047 EF                MOV     A,R7
0048 6407              XRL     A,#07H
004A 70B6              JNZ     ?C0040
                                           ; SOURCE LINE # 222
004C         ?C0042:
004C 22                RET     
             ; FUNCTION InitThermalTable1 (END)

             ; FUNCTION InitThermalTable2 (BEGIN)
                                           ; SOURCE LINE # 227
                                           ; SOURCE LINE # 228
                                           ; SOURCE LINE # 230
C51 COMPILER V9.03   OEM_FAN                                                               02/02/2015 14:30:22 PAGE 21  

;---- Variable 'index' assigned to Register 'R7' ----
0000 E4                CLR     A
0001 FF                MOV     R7,A
0002         ?C0043:
                                           ; SOURCE LINE # 231
                                           ; SOURCE LINE # 232
                                           ; SOURCE LINE # 233
0002 EF                MOV     A,R7
0003 75F00A            MOV     B,#0AH
0006 A4                MUL     AB
0007 2400        R     ADD     A,#LOW ThermalTalbe2+01H
0009 F582              MOV     DPL,A
000B E4                CLR     A
000C 3400        R     ADDC    A,#HIGH ThermalTalbe2+01H
000E 120000      R     LCALL   L?0114
0011 2400        R     ADD     A,#LOW ThermalTalbe2+04H
0013 F582              MOV     DPL,A
0015 E4                CLR     A
0016 3400        R     ADDC    A,#HIGH ThermalTalbe2+04H
0018 120000      R     LCALL   L?0102
                                           ; SOURCE LINE # 234
001B 120000      R     LCALL   L?0121
001E 2400        R     ADD     A,#LOW ThermalTalbe2+02H
0020 F582              MOV     DPL,A
0022 E4                CLR     A
0023 3400        R     ADDC    A,#HIGH ThermalTalbe2+02H
0025 120000      R     LCALL   L?0114
0028 2400        R     ADD     A,#LOW ThermalTalbe2+06H
002A F582              MOV     DPL,A
002C E4                CLR     A
002D 3400        R     ADDC    A,#HIGH ThermalTalbe2+06H
002F 120000      R     LCALL   L?0102
                                           ; SOURCE LINE # 235
0032 120000      R     LCALL   L?0121
0035 2400        R     ADD     A,#LOW ThermalTalbe2+03H
0037 F582              MOV     DPL,A
0039 E4                CLR     A
003A 3400        R     ADDC    A,#HIGH ThermalTalbe2+03H
003C 120000      R     LCALL   L?0114
003F 2400        R     ADD     A,#LOW ThermalTalbe2+08H
0041 F582              MOV     DPL,A
0043 E4                CLR     A
0044 3400        R     ADDC    A,#HIGH ThermalTalbe2+08H
0046 120000      R     LCALL   L?0102
0049 EE                MOV     A,R6
004A F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 236
004B 0F                INC     R7
                                           ; SOURCE LINE # 237
004C EF                MOV     A,R7
004D 6404              XRL     A,#04H
004F 70B1              JNZ     ?C0043
                                           ; SOURCE LINE # 238
0051         ?C0045:
0051 22                RET     
             ; FUNCTION InitThermalTable2 (END)

             ; FUNCTION FanFullOff (BEGIN)
                                           ; SOURCE LINE # 243
                                           ; SOURCE LINE # 244
                                           ; SOURCE LINE # 245
0000 E4                CLR     A
C51 COMPILER V9.03   OEM_FAN                                                               02/02/2015 14:30:22 PAGE 22  

0001 900000      E     MOV     DPTR,#DCR0
0004 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 246
0005 22                RET     
             ; FUNCTION FanFullOff (END)

             ; FUNCTION GetRPM1 (BEGIN)
                                           ; SOURCE LINE # 251
                                           ; SOURCE LINE # 252
                                           ; SOURCE LINE # 256
0000 900000      E     MOV     DPTR,#F1TMRR
0003 E0                MOVX    A,@DPTR
;---- Variable 'tach_H' assigned to Register 'R5' ----
0004 FD                MOV     R5,A
                                           ; SOURCE LINE # 257
0005 900000      E     MOV     DPTR,#F1TLRR
0008 E0                MOVX    A,@DPTR
;---- Variable 'tach_L' assigned to Register 'R4' ----
0009 FC                MOV     R4,A
                                           ; SOURCE LINE # 258
000A ED                MOV     A,R5
000B 7003              JNZ     ?C0048
000D EC                MOV     A,R4
000E 601C              JZ      ?C0047
0010         ?C0048:
                                           ; SOURCE LINE # 259
                                           ; SOURCE LINE # 260
0010 120000      R     LCALL   L?0119
0013 500C              JNC     ?C0049
                                           ; SOURCE LINE # 261
                                           ; SOURCE LINE # 262
0015 120000      R     LCALL   L?0115
0018 900000      E     MOV     DPTR,#RPM1
001B EE                MOV     A,R6
001C F0                MOVX    @DPTR,A
001D A3                INC     DPTR
001E EF                MOV     A,R7
001F F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 264
0020 22                RET     
0021         ?C0049:
                                           ; SOURCE LINE # 266
                                           ; SOURCE LINE # 267
0021 900000      E     MOV     DPTR,#RPM1
0024 741B              MOV     A,#01BH
0026 F0                MOVX    @DPTR,A
0027 A3                INC     DPTR
0028 7458              MOV     A,#058H
002A F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 268
                                           ; SOURCE LINE # 269
002B 22                RET     
002C         ?C0047:
                                           ; SOURCE LINE # 271
                                           ; SOURCE LINE # 272
002C E4                CLR     A
002D 900000      E     MOV     DPTR,#RPM1
0030 F0                MOVX    @DPTR,A
0031 A3                INC     DPTR
0032 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 273
0033 900000      E     MOV     DPTR,#DCR0
C51 COMPILER V9.03   OEM_FAN                                                               02/02/2015 14:30:22 PAGE 23  

0036 74A0              MOV     A,#0A0H
0038 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 274
                                           ; SOURCE LINE # 275
0039         ?C0052:
0039 22                RET     
             ; FUNCTION GetRPM1 (END)

             ; FUNCTION GetRPM2 (BEGIN)
                                           ; SOURCE LINE # 278
                                           ; SOURCE LINE # 279
                                           ; SOURCE LINE # 283
0000 900000      E     MOV     DPTR,#F2TMRR
0003 E0                MOVX    A,@DPTR
;---- Variable 'tach_H' assigned to Register 'R5' ----
0004 FD                MOV     R5,A
                                           ; SOURCE LINE # 284
0005 900000      E     MOV     DPTR,#F2TLRR
0008 E0                MOVX    A,@DPTR
;---- Variable 'tach_L' assigned to Register 'R4' ----
0009 FC                MOV     R4,A
                                           ; SOURCE LINE # 285
000A ED                MOV     A,R5
000B 7003              JNZ     ?C0054
000D EC                MOV     A,R4
000E 601C              JZ      ?C0053
0010         ?C0054:
                                           ; SOURCE LINE # 286
                                           ; SOURCE LINE # 287
0010 120000      R     LCALL   L?0119
0013 500C              JNC     ?C0055
                                           ; SOURCE LINE # 288
                                           ; SOURCE LINE # 289
0015 120000      R     LCALL   L?0115
0018 900000      E     MOV     DPTR,#RPM2
001B EE                MOV     A,R6
001C F0                MOVX    @DPTR,A
001D A3                INC     DPTR
001E EF                MOV     A,R7
001F F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 291
0020 22                RET     
0021         ?C0055:
                                           ; SOURCE LINE # 293
                                           ; SOURCE LINE # 294
0021 900000      E     MOV     DPTR,#RPM2
0024 741B              MOV     A,#01BH
0026 F0                MOVX    @DPTR,A
0027 A3                INC     DPTR
0028 7458              MOV     A,#058H
002A F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 295
                                           ; SOURCE LINE # 296
002B 22                RET     
002C         ?C0053:
                                           ; SOURCE LINE # 298
                                           ; SOURCE LINE # 299
002C E4                CLR     A
002D 900000      E     MOV     DPTR,#RPM2
0030 F0                MOVX    @DPTR,A
0031 A3                INC     DPTR
0032 F0                MOVX    @DPTR,A
C51 COMPILER V9.03   OEM_FAN                                                               02/02/2015 14:30:22 PAGE 24  

                                           ; SOURCE LINE # 300
0033 900000      E     MOV     DPTR,#DCR1
0036 74A0              MOV     A,#0A0H
0038 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 301
                                           ; SOURCE LINE # 302
0039         ?C0058:
0039 22                RET     
             ; FUNCTION GetRPM2 (END)

             ; FUNCTION FanManager (BEGIN)
                                           ; SOURCE LINE # 308
                                           ; SOURCE LINE # 309
                                           ; SOURCE LINE # 310
0000 900000      E     MOV     DPTR,#FanFullOnCont
0003 E0                MOVX    A,@DPTR
0004 6009              JZ      ?C0059
                                           ; SOURCE LINE # 311
                                           ; SOURCE LINE # 312
0006 E0                MOVX    A,@DPTR
0007 14                DEC     A
0008 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 313
0009 120000      R     LCALL   GetRPM1
                                           ; SOURCE LINE # 314
000C 020000      R     LJMP    GetRPM2
                                           ; SOURCE LINE # 316
000F         ?C0059:
                                           ; SOURCE LINE # 318
000F 900000      E     MOV     DPTR,#DebugFan1RPMT
0012 E0                MOVX    A,@DPTR
0013 7024              JNZ     ?C0061
                                           ; SOURCE LINE # 319
                                           ; SOURCE LINE # 320
0015 120000      R     LCALL   GetRPM1
                                           ; SOURCE LINE # 321
0018 900000      E     MOV     DPTR,#Fan2RPM
001B E0                MOVX    A,@DPTR
001C 6008              JZ      ?C0062
                                           ; SOURCE LINE # 322
                                           ; SOURCE LINE # 323
001E 120000      R     LCALL   GetRPM2
                                           ; SOURCE LINE # 324
0021 120000      R     LCALL   FineTuneFan2PRM
                                           ; SOURCE LINE # 325
0024 8010              SJMP    ?C0063
0026         ?C0062:
                                           ; SOURCE LINE # 327
                                           ; SOURCE LINE # 328
0026 900000      E     MOV     DPTR,#DCR0
0029 E0                MOVX    A,@DPTR
002A 600A              JZ      ?C0063
                                           ; SOURCE LINE # 329
                                           ; SOURCE LINE # 330
002C E4                CLR     A
002D 900000      E     MOV     DPTR,#RPM2
0030 F0                MOVX    @DPTR,A
0031 A3                INC     DPTR
0032 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 331
0033 120000      R     LCALL   FanFullOff
                                           ; SOURCE LINE # 332
C51 COMPILER V9.03   OEM_FAN                                                               02/02/2015 14:30:22 PAGE 25  

                                           ; SOURCE LINE # 333
0036         ?C0063:
                                           ; SOURCE LINE # 334
0036 020000      R     LJMP    FanControl
                                           ; SOURCE LINE # 335
0039         ?C0061:
                                           ; SOURCE LINE # 337
                                           ; SOURCE LINE # 338
0039 120000      R     LCALL   GetRPM1
                                           ; SOURCE LINE # 339
003C 900000      E     MOV     DPTR,#RPM1
003F E0                MOVX    A,@DPTR
0040 7002              JNZ     ?C0094
0042 A3                INC     DPTR
0043 E0                MOVX    A,@DPTR
0044         ?C0094:
0044 7007              JNZ     ?C0066
                                           ; SOURCE LINE # 340
                                           ; SOURCE LINE # 341
0046 900000      E     MOV     DPTR,#DCR0
0049 74A0              MOV     A,#0A0H
004B F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 342
004C 22                RET     
004D         ?C0066:
                                           ; SOURCE LINE # 344
                                           ; SOURCE LINE # 345
004D 900000      E     MOV     DPTR,#DebugFan1RPMT
0050 120000      R     LCALL   L?0107
0053 900000      E     MOV     DPTR,#RPM1
0056 E0                MOVX    A,@DPTR
0057 9E                SUBB    A,R6
0058 500D              JNC     ?C0068
                                           ; SOURCE LINE # 346
                                           ; SOURCE LINE # 347
005A 900000      E     MOV     DPTR,#DCR0
005D E0                MOVX    A,@DPTR
005E C3                CLR     C
005F 94F0              SUBB    A,#0F0H
0061 502C              JNC     ?C0060
                                           ; SOURCE LINE # 348
0063 E0                MOVX    A,@DPTR
0064 04                INC     A
0065 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 349
0066 22                RET     
0067         ?C0068:
                                           ; SOURCE LINE # 350
0067 900000      E     MOV     DPTR,#DebugFan1RPMT
006A E0                MOVX    A,@DPTR
006B 75F064            MOV     B,#064H
006E A4                MUL     AB
006F 2464              ADD     A,#064H
0071 FF                MOV     R7,A
0072 E4                CLR     A
0073 35F0              ADDC    A,B
0075 FE                MOV     R6,A
0076 D3                SETB    C
0077 900000      E     MOV     DPTR,#RPM1+01H
007A E0                MOVX    A,@DPTR
007B 9F                SUBB    A,R7
007C 900000      E     MOV     DPTR,#RPM1
C51 COMPILER V9.03   OEM_FAN                                                               02/02/2015 14:30:22 PAGE 26  

007F E0                MOVX    A,@DPTR
0080 9E                SUBB    A,R6
0081 400C              JC      ?C0060
                                           ; SOURCE LINE # 351
                                           ; SOURCE LINE # 352
0083 900000      E     MOV     DPTR,#DCR0
0086 E0                MOVX    A,@DPTR
0087 D3                SETB    C
0088 9400              SUBB    A,#00H
008A 4003              JC      ?C0060
                                           ; SOURCE LINE # 353
008C E0                MOVX    A,@DPTR
008D 14                DEC     A
008E F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 354
                                           ; SOURCE LINE # 355
                                           ; SOURCE LINE # 356
                                           ; SOURCE LINE # 357
008F         ?C0060:
008F 22                RET     
             ; FUNCTION FanManager (END)

             ; FUNCTION ReadCPUTemp (BEGIN)
                                           ; SOURCE LINE # 362
                                           ; SOURCE LINE # 363
                                           ; SOURCE LINE # 364
0000 900000      E     MOV     DPTR,#SysPowState
0003 E0                MOVX    A,@DPTR
0004 B4100C            CJNE    A,#010H,?C0076
                                           ; SOURCE LINE # 365
                                           ; SOURCE LINE # 369
0007 900000      E     MOV     DPTR,#CPUTjmax
000A E0                MOVX    A,@DPTR
000B 7003              JNZ     ?C0074
                                           ; SOURCE LINE # 370
                                           ; SOURCE LINE # 371
000D 020000      E     LJMP    PECI_ReadCPUTJMAX
                                           ; SOURCE LINE # 372
0010         ?C0074:
                                           ; SOURCE LINE # 374
                                           ; SOURCE LINE # 375
0010 120000      E     LCALL   PECI_ReadCPUTemp
                                           ; SOURCE LINE # 376
                                           ; SOURCE LINE # 382
                                           ; SOURCE LINE # 383
0013         ?C0076:
0013 22                RET     
             ; FUNCTION ReadCPUTemp (END)

             ; FUNCTION ReadDgpuTemp (BEGIN)
                                           ; SOURCE LINE # 389
                                           ; SOURCE LINE # 390
                                           ; SOURCE LINE # 391
0000 900000      E     MOV     DPTR,#SysPowState
0003 E0                MOVX    A,@DPTR
0004 6410              XRL     A,#010H
0006 6003              JZ      $ + 5H
0008 020000      R     LJMP    ?C0093
                                           ; SOURCE LINE # 392
                                           ; SOURCE LINE # 403
000B 900000      R     MOV     DPTR,#Status
000E F0                MOVX    @DPTR,A
C51 COMPILER V9.03   OEM_FAN                                                               02/02/2015 14:30:22 PAGE 27  

                                           ; SOURCE LINE # 405
000F 900000      E     MOV     DPTR,#SmBusI2CAddress
0012 E0                MOVX    A,@DPTR
0013 7023              JNZ     ?C0078
                                           ; SOURCE LINE # 406
0015 900000      R     MOV     DPTR,#byte_register_pntr
0018 120000      R     LCALL   L?0105
                                           ; SOURCE LINE # 418
001B E4                CLR     A
001C 900000      E     MOV     DPTR,#?_bRWSMBus?BYTE+03H
001F F0                MOVX    @DPTR,A
0020 A3                INC     DPTR
0021 120000      R     LCALL   L?0106
0024 E4                CLR     A
0025 A3                INC     DPTR
0026 F0                MOVX    @DPTR,A
0027 7B9E              MOV     R3,#09EH
0029 7D08              MOV     R5,#08H
002B FF                MOV     R7,A
002C 120000      E     LCALL   _bRWSMBus
002F EF                MOV     A,R7
0030 7003              JNZ     $ + 5H
0032 020000      R     LJMP    ?C0080
                                           ; SOURCE LINE # 419
                                           ; SOURCE LINE # 423
                                           ; SOURCE LINE # 424
                                           ; SOURCE LINE # 426
0035 020000      R     LJMP    ?C0097
0038         ?C0078:
                                           ; SOURCE LINE # 433
0038 900000      E     MOV     DPTR,#GPU_Therm_Method
003B E0                MOVX    A,@DPTR
003C 6401              XRL     A,#01H
003E 7014              JNZ     ?C0081
                                           ; SOURCE LINE # 434
0040 120000      R     LCALL   L?0103
0043 7404              MOV     A,#04H
0045 120000      R     LCALL   L?0123
0048 120000      E     LCALL   _bRSMBusBlockLS
004B EF                MOV     A,R7
004C 6006              JZ      ?C0081
                                           ; SOURCE LINE # 435
                                           ; SOURCE LINE # 436
                                           ; SOURCE LINE # 437
                                           ; SOURCE LINE # 438
004E 120000      R     LCALL   L?0099
                                           ; SOURCE LINE # 439
0051 120000      R     LCALL   L?0116
                                           ; SOURCE LINE # 440
                                           ; SOURCE LINE # 442
0054         ?C0081:
                                           ; SOURCE LINE # 444
0054 900000      E     MOV     DPTR,#GPU_Therm_Method
0057 E0                MOVX    A,@DPTR
0058 6402              XRL     A,#02H
005A 7017              JNZ     ?C0083
                                           ; SOURCE LINE # 445
005C 120000      R     LCALL   L?0103
005F A3                INC     DPTR
0060 7402              MOV     A,#02H
0062 F0                MOVX    @DPTR,A
0063 7D0C              MOV     R5,#0CH
C51 COMPILER V9.03   OEM_FAN                                                               02/02/2015 14:30:22 PAGE 28  

0065 E4                CLR     A
0066 FF                MOV     R7,A
0067 120000      E     LCALL   _bRSMBusBlockLS
006A EF                MOV     A,R7
006B 6006              JZ      ?C0083
                                           ; SOURCE LINE # 446
                                           ; SOURCE LINE # 447
                                           ; SOURCE LINE # 448
                                           ; SOURCE LINE # 449
006D 120000      R     LCALL   L?0099
                                           ; SOURCE LINE # 450
0070 120000      R     LCALL   L?0116
                                           ; SOURCE LINE # 451
                                           ; SOURCE LINE # 452
0073         ?C0083:
                                           ; SOURCE LINE # 454
0073 900000      E     MOV     DPTR,#GPU_Therm_Method
0076 E0                MOVX    A,@DPTR
0077 6403              XRL     A,#03H
0079 7017              JNZ     ?C0085
                                           ; SOURCE LINE # 455
007B 900000      E     MOV     DPTR,#SmBusI2CAddress
007E E0                MOVX    A,@DPTR
007F FD                MOV     R5,A
0080 7A00        E     MOV     R2,#HIGH ATIDGPUTemp
0082 7B00        E     MOV     R3,#LOW ATIDGPUTemp
0084 E4                CLR     A
0085 FF                MOV     R7,A
0086 120000      E     LCALL   _bSMBusReceiveByte
0089 EF                MOV     A,R7
008A 6006              JZ      ?C0085
                                           ; SOURCE LINE # 456
                                           ; SOURCE LINE # 457
                                           ; SOURCE LINE # 458
                                           ; SOURCE LINE # 459
008C 120000      R     LCALL   L?0100
                                           ; SOURCE LINE # 460
008F 120000      R     LCALL   L?0117
                                           ; SOURCE LINE # 461
                                           ; SOURCE LINE # 462
0092         ?C0085:
                                           ; SOURCE LINE # 464
0092 900000      E     MOV     DPTR,#GPU_Therm_Method
0095 E0                MOVX    A,@DPTR
0096 6404              XRL     A,#04H
0098 701C              JNZ     ?C0087
                                           ; SOURCE LINE # 465
009A FB                MOV     R3,A
009B 7D9E              MOV     R5,#09EH
009D FF                MOV     R7,A
009E 120000      E     LCALL   _bSMBusSendByte
                                           ; SOURCE LINE # 466
00A1 120000      R     LCALL   L?0124
00A4 120000      R     LCALL   L?0104
00A7 120000      R     LCALL   L?0122
00AA 120000      E     LCALL   _bRSMBusBlockLS
00AD EF                MOV     A,R7
00AE 6006              JZ      ?C0087
                                           ; SOURCE LINE # 467
                                           ; SOURCE LINE # 468
                                           ; SOURCE LINE # 469
                                           ; SOURCE LINE # 470
C51 COMPILER V9.03   OEM_FAN                                                               02/02/2015 14:30:22 PAGE 29  

00B0 120000      R     LCALL   L?0100
                                           ; SOURCE LINE # 471
00B3 120000      R     LCALL   L?0117
                                           ; SOURCE LINE # 472
                                           ; SOURCE LINE # 473
00B6         ?C0087:
                                           ; SOURCE LINE # 475
00B6 900000      E     MOV     DPTR,#GPU_Therm_Method
00B9 E0                MOVX    A,@DPTR
00BA 6405              XRL     A,#05H
00BC 7034              JNZ     ?C0080
                                           ; SOURCE LINE # 476
00BE 900000      E     MOV     DPTR,#SmBusI2CAddress
00C1 E0                MOVX    A,@DPTR
00C2 FB                MOV     R3,A
00C3 E4                CLR     A
00C4 900000      E     MOV     DPTR,#?_bWSMBusBlock?BYTE+03H
00C7 F0                MOVX    @DPTR,A
00C8 A3                INC     DPTR
00C9 F0                MOVX    @DPTR,A
00CA A3                INC     DPTR
00CB F0                MOVX    @DPTR,A
00CC A3                INC     DPTR
00CD 04                INC     A
00CE F0                MOVX    @DPTR,A
00CF E4                CLR     A
00D0 A3                INC     DPTR
00D1 F0                MOVX    @DPTR,A
00D2 7D94              MOV     R5,#094H
00D4 FF                MOV     R7,A
00D5 120000      E     LCALL   _bWSMBusBlock
                                           ; SOURCE LINE # 477
00D8 120000      R     LCALL   L?0124
00DB 120000      R     LCALL   L?0104
00DE 120000      R     LCALL   L?0122
00E1 120000      E     LCALL   _bRSMBusBlockLS
00E4 EF                MOV     A,R7
00E5 600B              JZ      ?C0080
                                           ; SOURCE LINE # 478
                                           ; SOURCE LINE # 479
                                           ; SOURCE LINE # 480
                                           ; SOURCE LINE # 481
00E7 120000      R     LCALL   L?0100
00EA 900000      E     MOV     DPTR,#TVGA_temp
00ED EF                MOV     A,R7
00EE F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 482
00EF         ?C0097:
00EF 120000      R     LCALL   L?0118
                                           ; SOURCE LINE # 483
                                           ; SOURCE LINE # 484
                                           ; SOURCE LINE # 488
00F2         ?C0080:
                                           ; SOURCE LINE # 490
00F2 900000      R     MOV     DPTR,#Status
00F5 E0                MOVX    A,@DPTR
00F6 6006              JZ      ?C0091
                                           ; SOURCE LINE # 491
                                           ; SOURCE LINE # 492
00F8 E4                CLR     A
00F9 900000      E     MOV     DPTR,#Cark_Test01
00FC F0                MOVX    @DPTR,A
C51 COMPILER V9.03   OEM_FAN                                                               02/02/2015 14:30:22 PAGE 30  

                                           ; SOURCE LINE # 494
00FD 22                RET     
00FE         ?C0091:
                                           ; SOURCE LINE # 496
                                           ; SOURCE LINE # 498
00FE 900000      E     MOV     DPTR,#Cark_Test01
0101 E0                MOVX    A,@DPTR
0102 04                INC     A
0103 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 499
                                           ; SOURCE LINE # 500
                                           ; SOURCE LINE # 501
0104         ?C0093:
0104 22                RET     
             ; FUNCTION ReadDgpuTemp (END)



MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =   1410    ----
   CONSTANT SIZE    =    110    ----
   XDATA SIZE       =   ----       9
   PDATA SIZE       =   ----    ----
   DATA SIZE        =   ----    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
